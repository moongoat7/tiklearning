<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LearningTok — static (UMD)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
</head>
<body class="min-h-screen bg-gradient-to-b from-neutral-900 to-black text-white">
  <div id="root"></div>
  <script>
    const { useState, useEffect, useMemo, useRef } = React;

    const DEFAULT_DECK = [
      { id: 'm1', type: 'mcq', topic: 'Physics: Kinematics', prompt: 'A car accelerates from 0 to 20 m/s in 4 s. What is the average acceleration?', choices: ['2.5 m/s²','5 m/s²','10 m/s²','80 m/s²'], correctIndex: 1, explain: 'a = Δv/Δt = 20/4 = 5 m/s².' },
      { id: 'f1', type: 'flashcard', topic: 'Hebrew slang', front: 'אשכרה (ashkara)', back: "Meaning: 'actually/for real' (emphatic).\nUsage: 'אשכרה עשית את זה?' = 'You actually did it?'" },
      { id: 'm2', type: 'mcq', topic: 'Math: Derivatives', prompt: 'd/dx (x^2) = ?', choices: ['x','2x','x^2','2'], correctIndex: 1, explain: 'Power rule: d/dx x^n = n x^{n-1}.' }
    ];

    function useLocalStorage(key, initial){
      const [v,setV]=useState(()=>{try{const x=localStorage.getItem(key);return x?JSON.parse(x):initial;}catch{return initial;}});
      useEffect(()=>{try{localStorage.setItem(key,JSON.stringify(v));}catch{}},[key,v]);
      return [v,setV];
    }

    function Header({ progressPercent, onReset }){
      return React.createElement('div',{className:'flex items-center justify-between p-3'},
        React.createElement('div',{className:'flex items-center gap-3'},
          React.createElement('div',{className:'w-8 h-8 rounded-xl bg-white/10 backdrop-blur flex items-center justify-center'},
            React.createElement('span',{className:'text-xs font-bold'},'LT')
          ),
          React.createElement('div',null,
            React.createElement('div',{className:'text-sm text-white/90 font-semibold'},'LearningTok'),
            React.createElement('div',{className:'text-xs text-white/60'},'Swipe to learn')
          )
        ),
        React.createElement('div',{className:'flex items-center gap-3'},
          React.createElement('button',{onClick:onReset,className:'px-2.5 py-1.5 text-xs rounded-lg bg-white/10 hover:bg-white/20 transition'},'Reset'),
          React.createElement('div',{className:'text-xs text-white/60'},progressPercent+'%')
        )
      );
    }

    function MCQCard({ item, onAnswered }){
      const [picked,setPicked]=useState(null);
      const correct = picked!==null && picked===item.correctIndex;
      return React.createElement('div',{className:'p-4 flex flex-col gap-3'},
        React.createElement('div',{className:'text-xs uppercase tracking-wider text-white/60'}, item.topic),
        React.createElement('h2',{className:'text-xl font-semibold leading-snug'}, item.prompt),
        React.createElement('div',{className:'grid gap-2 mt-2'},
          ...item.choices.map((c,i)=>React.createElement('button',{
            key:i, onClick:()=>setPicked(i),
            className:'text-left p-3 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition ' + (picked===i ? (i===item.correctIndex?'ring-2 ring-green-400':'ring-2 ring-red-400') : '')
          }, React.createElement('div',{className:'text-sm font-medium'}, c)))
        ),
        picked!==null && React.createElement('div',{className:'mt-2 p-3 rounded-xl '+(correct?'bg-green-500/10':'bg-red-500/10')},
          React.createElement('div',{className:'text-sm whitespace-pre-line'}, item.explain),
          React.createElement('button',{onClick:()=>onAnswered(correct),className:'mt-3 px-4 py-2 rounded-lg bg-white/10 hover:bg-white/20 text-sm'},'Next')
        )
      );
    }

    function FlashcardCard({ item, onNext }){
      const [flipped,setFlipped]=useState(false);
      return React.createElement('div',{className:'p-4 flex flex-col gap-3'},
        React.createElement('div',{className:'text-xs uppercase tracking-wider text-white/60'}, item.topic),
        React.createElement('h2',{className:'text-xl font-semibold leading-snug'}, 'Flashcard'),
        React.createElement('button',{onClick:()=>setFlipped(!flipped),className:'relative h-56 rounded-2xl border border-white/10 bg-white/5 overflow-hidden group w-full'},
          React.createElement('div',{className:'absolute inset-0 p-4 flex items-center justify-center text-center text-lg font-medium whitespace-pre-line'}, flipped?item.back:item.front)
        ),
        flipped && React.createElement('button',{onClick:onNext,className:'self-start mt-2 px-4 py-2 rounded-lg bg-white/10 hover:bg-white/20 text-sm'},'Next'),
        React.createElement('div',{className:'text-xs text-white/50 mt-auto'},'Tap the card to flip.')
      );
    }

    function Card({ item, onNext, onCorrect }){
      if(item.type==='mcq') return React.createElement(MCQCard,{item,onAnswered:(ok)=>{ if(ok) onCorrect(); onNext(); }});
      if(item.type==='flashcard') return React.createElement(FlashcardCard,{item,onNext:()=>{ onCorrect(); onNext(); }});
      return React.createElement('div',null,'Unknown card type');
    }

    function App(){
      const [deck,setDeck]=useLocalStorage('lt.deck', DEFAULT_DECK);
      const [index,setIndex]=useLocalStorage('lt.index', 0);
      const [correctMap,setCorrectMap]=useLocalStorage('lt.correct', {});
      const total = deck.length||1;
      const correctCount = useMemo(()=>Object.values(correctMap).filter(Boolean).length,[correctMap]);
      const progressPercent = Math.round((correctCount/total)*100);

      const next = ()=>setIndex(i=>Math.min(i+1, deck.length-1));
      const prev = ()=>setIndex(i=>Math.max(i-1, 0));
      const onCorrect = ()=>{
        const id = deck[index]?.id;
        if(!id) return;
        setCorrectMap(m=>({...m,[id]:true}));
      };

      return React.createElement('div',{className:'py-8 px-4'},
        React.createElement('div',{className:'relative mx-auto max-w-[380px] h-[740px] rounded-[2.25rem] shadow-[0_10px_30px_rgba(0,0,0,0.25)] shadow-black/20 border border-white/10 overflow-hidden bg-gradient-to-b from-zinc-900 to-black text-white'},
          React.createElement('div',{className:'absolute left-1/2 -translate-x-1/2 top-2 w-40 h-5 rounded-b-2xl bg-black/40'}),
          React.createElement('div',{className:'absolute inset-0 pointer-events-none bg-[radial-gradient(ellipse_at_top,rgba(255,255,255,0.06),transparent_60%)]'}),
          React.createElement('div',{className:'relative z-10 h-full flex flex-col'},
            React.createElement(Header,{progressPercent,onReset:()=>{localStorage.clear(); location.reload();}}),
            React.createElement('div',{className:'relative flex-1 overflow-hidden'},
              deck[index] && React.createElement('div',{className:'absolute inset-0 transition-transform'}, 
                React.createElement(Card,{item:deck[index], onNext:next, onCorrect})
              ),
              React.createElement('div',{className:'absolute bottom-3 left-0 right-0 mx-auto w-full flex items-center justify-center gap-2 text-white/60 text-xs'},
                React.createElement('button',{onClick:prev,className:'px-3 py-1.5 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10'},'Prev'),
                React.createElement('div',{className:'px-3 py-1.5 rounded-lg bg-white/5 border border-white/10'}, (index+1)+' / '+deck.length),
                React.createElement('button',{onClick:next,className:'px-3 py-1.5 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10'},'Next')
              )
            )
          )
        ),
        React.createElement('div',{className:'max-w-[380px] mx-auto mt-4 text-center text-white/60 text-sm'},'Static UMD build.')
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(App));
  </script>
</body>
</html>